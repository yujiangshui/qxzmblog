title: 网站搬家的一般步骤
id: 369
categories:
  - 网站与后台开发
date: 2012-01-20 12:39:07
tags:
---

前些天，准备给我这个博客（qianxingzhem.com）搬家来着，结果域名被绑定到justhost空间上了，动不了于是准备了半天没有搬成。关于网站搬家，有很多新站长可能感觉无从下手，结果搬完之后的网站，就像重新建设的一样，乱七八糟的而且还有数据丢失。今天，我就结合以前学的SEO中关于网站搬家部分的知识以及前些天搬家的实践来总结一下网站搬家的一般步骤。

首先，网站搬家的原则是：**不丢失任何文件以及链接，保持和搬家前网站一致。**
**第一步：备份并且下载所搬网站的内容**
做什么事之前，要养成一个备份的习惯，如果出现意外，可以防止丢失。此外，我所说的网站的内容不仅仅是你看到的服务器上的网站源码文件。就像我的这个是用wordpress搭建的博客网站，其博客数据都储存在mysql数据库中，而重要的部分也是这个。我们不仅仅要下载网站的源码文件，还要是用网站后台的导出数据的功能，把数据库里面的网站数据导出来。
**第二步：上传网站文件到新空间**
这一点不用多说，把传下来的东西再传到新的服务器上。但是要注意，这个传是有技巧的。对于普通的html页面和是用asp+access数据库的网站，可以直接上传。但是是用php+mysql数据库以及类似的数据库与主机空间分离的网站，直接上传是会出现数据库连接问题的。原因很简单，网站文件中，有个文件是配置数据库连接的。它配置的是你现在使用的数据库的相关信息，比如数据库地址、用户名、密码等。数据库的地址一般就是本机，通常为localhost，而你上传上去之后，新主机的并没有那种配置，所以就会出现数据库连接出错。

而你根据新服务器的数据库配置来修改你的数据库连接文件，也是不可以的，因为你的数据库里面没有任何数据，即使连接上了，也不会调用出来东西。这样，可以通过多种方法，比较常用的有这两种：第一种就是使用phpmyadmin等数据库操作软件或者登陆数据库管理页面，把你原网站导出的数据库文件导入进去。然后根据新数据库的信息修改数据库连接文件，之后就可以访问了。第二种我比较喜欢，就是把你的网站重新在新服务器上安装一遍。比如我的这个wp博客，就可以把一套新的wp程序上传上去，根据他们的数据库信息重新配置安装一遍，然后把原网站导出的数据从后台导入进去，最好把上面所有非数据库配置文件都删掉，然后把原网站的非数据库配置文件上传上去就行了。一般来说就这两种方法，大家可以根据情况操作。
**第三步：调整并且修改新空间上的网站**
完全上传上去之后，可能会有一些冗杂数据和错误等。冗杂数据删掉就可以了，而错误，就需要多方面考虑。出现的错误，有以下几种原因：1，可能是由服务器的配置造成的。很简单的例子，有些服务器支持伪静态，网站使用伪静态方式的可以正常使用，而转移到一个不支持伪静态的服务器上，伪静态页面就无法使用了。2，可能由网站的配置造成的。比如在网站后台的配置中，一般需要配置你的网址。它的用处一般是来链接模板、以及网站其他资源的，而搬了新空间但是没有把域名转接上，就无法正常访问网站资源造成网站显示不正常。一切按照原网站的样子调整修改，并且确认无误。
**第四步：修改dns设置绑定域名到新空间**
当你把搬过去的网站彻底的修改调整好了和原网站已经没有什么区别了之后，之后要做的就是把你的域名解析到新的空间上面，让你的域名指向你搬过去的地方。注意，只有当和原网站一样之后，在进行转接。如果过早的转接，会导致用户访问时看到你的网站是一个有错误不完善的网站，而且会有部分连接出错。而我们的目标是让搬家之前访问的用户和搬家之后再次访问的用户感觉不到有什么变化。
**第五步：清除原网站内容及数据**
搬完就完事了？不，你还要把原先网站的内容全部清空。这只是一个好习惯，防止出现一些特殊的意外，比如数据泄露。就像前不久csdn泄露的600万份用户的账号资料。这本来就是一个过期的备份，本来应该及时删掉的，结果留在那里了，于是就被下载了。所以，清空原来服务器上的数据。

**这样的五步，你的网站就成功的搬完家了。**