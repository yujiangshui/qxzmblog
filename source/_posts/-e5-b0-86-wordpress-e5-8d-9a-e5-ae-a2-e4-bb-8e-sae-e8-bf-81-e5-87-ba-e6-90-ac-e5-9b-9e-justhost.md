title: 将 WordPress 博客从 SAE 迁出搬回 JustHost
id: 1846
categories:
  - 网站与后台开发
date: 2013-04-01 04:24:14
tags:
---

前几天不知道为什么，SAE 老是抽风，然后打开很慢甚至无法打开，然而 ping 确实可以 ping 的通。不通过顶级域名而是直接使用 SAE 提供的二级域名也无法打开。

我一直以为 SAE 是非常正规、高质量的，可能偶尔遇到几次抽风问题，事实上这是我第一次遇到。写了一篇文章，结果等了一个下午也没有发表出去。期间，我找了一些网友进行测试，发现不是我个人网络的问题，他们也都打不开。然后 哼哼猪 跟我说，我的博客经常遇到这种很慢的情况。难道是我之前都没有怎么管理导致的吗？

我打算再等等看，第二天恢复正常了。然后第三天一大清早的，又是这种问题。我上网搜索了一下其他放在 SAE 上面的网站，没有这个问题。我开始忍受不了了，忍受不了这种影响用户体验的问题存在。于是打算从 SAE 迁出去。

跟 [软矿](www.x-berry.com) 的博主 MK 聊了一下，跟我推荐了几个 VPS，我看了半个下午的 VPS 套餐，确定下来之后发现人家卖完了，很无语。于是晚上将博客数据什么的搬回了之前的 JustHost 暂时用一下待日后再解决主机问题。虽然访问速度比较慢，但是至少不会出现那种打不开的抽风问题，使用 又拍云 进行静态文件加速，应该也不会慢到受不了。

## WordPress 迁出 SAE 的步骤

这段虽然比较水，但是还是大体说一下，因为搬出来的时候遇到了一些小插曲，可供后来者参考使用。

WordPress 搬家步骤有很多，我个人比较喜欢的是：导出数据》》在目的主机安装 WordPress 》》导入数据。

这时候，强大的资源外链的作用体现出来了，因为图片等都用外链，所以根本不用管那些资源，直接把数据库内容转移即可。看起来步骤非常简单，但实际上从 SAE 迁移到 JustHost 的过程中遇到了很多问题，折腾了一个下午。

## SAE 的数据导出问题

导出 WordPress 的数据有两种方式，第一种是在后台使用“工具”里面的“导出”，导出为 xml 文件，然后在新博客的后台直接导入即可。当然，这是一种不完全的导入方式，虽然说是博客全部的数据，但实际上只有文章、页面、简单的配置数据，一些博客名称什么的内容，还需要自己在新博客后台细微调整。

因为这种方式比较傻瓜，所以优先考虑。这时候出现问题了，SAE 上的 WordPress 无法导出所有的数据，只能导出 34kb 的 xml 数据文件。原因不详，看后台提示可能是因为 SAE 限制了数据查询次数还是其他乱七八糟的东西，反正导不出所有数据。不得已，我拿出前天导出的备份 xml 文件，大约 3M 左右大小。这时候要上传新博客的时候，发现服务商把 php 的上传限制在了 2M 大小。好吧，这种方法还得看你的主机参数配置，所以不是好办法。

SAE 上面也附带了 PHPMyAdmin 那就使用它直接把 MySQL 的数据库内容导出，然后在 JustHost 后台的 PHPMyAdmin 中导入好了。SAE 上的东西肯定都是阉割版的，不知道 PHPMyAdmin 是什么版本的，把数据库导出之后，在 JustHost 后台无法导入，因为某些语句出错。后来经过搜索，发现也有网友迁移的时候，遇到了这种问题。

SAE 还提供了一个他们自己开发的数据库管理服务 [Deferred Jobs](http://sae.sina.com.cn/?m=devcenter&catId=196) 可以用来导入导出 MySQL 数据库。因为使用这个服务需要排队等，不是立即生效的，所以官方推荐 4M 一下的数据库用 PHPMyAdmin 导入导出，4M 以上的使用这个服务。不管了，直接用了，其实没过多久就直接导出完毕。

下载下来 sql 文件有 3M 多，而使用 PHPMyAdmin 导出的才有 2M 多一点，我怀疑没有完全导出，难道又是被 SAE 阉割限制了？这次的 sql 文件非常正常，使用 JustHost 的后台 PHPMyAdmin 直接上传导入就可以了。

再全面的检查一下，增加一下固定链接伪静态，把主题文件、插件上传到新博客，这样搬家完成了，顺带升级成了最新版的 WordPress，SAE 上用的是 3.2.1 阉割版的 WordPress 大家都懂的。

## 感谢 SAE 

我从2012年10月16号左右，把 WordPress 博客从 JustHost 迁移到了 SAE，后来总结写了[《WordPress 迁移 SAE 完全操作攻略》](http://www.qianxingzhem.com/post-1387.html) 这篇文章，下面虽然有评论说看到很多人进去又出来了，但是我觉得我不会。因为我对 SAE 的服务挺有好感的，一直以为 新浪 是大公司，放在上面很安全，不会丢失数据也不会轻易被黑客攻击，可以安心写文章。以至于后面的这段时间，我连数据都没有备份过几次。

截止到今年3月份，博客在 SAE 上面已经5个多月了，这段时间内访问速度还是挺不错的，当然是相对于 JustHost 来说。对于小型的博客来说，花费非常少，我也做了很多优化，消耗资源很少，所以截止到现在的5个月的使用，算起来只花了2块钱的短信验证费，其他都是实名认证送的云豆。

同时通过 SAE，还学到了一些简单的 SVN 使用等。总之，虽然搬出了 SAE 还是要感谢它，日后一些小应用的开发什么的，说不定还会放在上面。感谢 SAE ！

## 为什么不要用 SAE

在刚开始使用 SAE 的时候，对 SAE 充满了好感，曾经强烈推荐周围的朋友试用 SAE，也曾建议 多说 他们使用 SAE 或者 阿里云 主机，这样可以减少成本、人力消耗。因为他们的服务器都是自己购买，自己维护的，如果使用第三方稳定的服务，就可以仅仅专注于 多说 的开发了。但是他们拒绝了，我现在明白了。

东西只有掌握在自己手里，才是最安全的。SAE 或许比一些低端主机靠谱的多，但是为了开发或者资源限制，功能什么的阉割的太严重了。开发、修改等，都得按照他们的套路来，而放在自己的主机或者服务器上，想怎么处理就怎么处理（当然，你得有相关技术），无论是备份还是什么，都是很方便的。我想，多说团队之所以自己维护服务器，就是这个原因吧。

对我个人来说，可能也不会在 SAE 上寄放博客了，因为我本身要折腾 WordPress 所以在自己的主机上折腾比较方便，SAE 上的是早期阉割版本的 WordPress。

## 博客未来的发展

JustHost 虽然便宜，但是速度实在是比较慢，之前也是因为经常抽风宕机所以才想搬到 SAE 上面的。但是最近手头太紧，买好点的 VPS 又没有足够的资金，此外还有几个筹划中的网站项目等待上线。所以先暂时使用 JustHost，多写一些文章，等访问量大了，也有足够的资金，就会更换好点的主机，例如 linode 啥的。暂时先忍忍吧。