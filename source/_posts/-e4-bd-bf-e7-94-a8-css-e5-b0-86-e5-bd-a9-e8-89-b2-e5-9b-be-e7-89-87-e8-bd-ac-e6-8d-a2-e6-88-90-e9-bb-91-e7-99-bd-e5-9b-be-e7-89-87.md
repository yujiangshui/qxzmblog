title: 使用 CSS 将彩色图片转换成黑白图片
tags:

- CSS
  id: 1931
  categories:
- CSS
- 前端相关
  date: 2013-05-02 04:35:44

---

- 原文：[Convert Images To Black And White With CSS](http://demosthenes.info/blog/532/Convert-Images-To-Black-And-White-With-CSS)
- 原作者：[Dudley Storey](http://demosthenes.info/users.php?usernum=1)  译者：[潜行者 m](http://www.qianxingzhem.com)
- 版权声明：版权归原作者所有，翻译仅作学习参考交流使用。
  PS：最近翻译不少国外的优秀文章，不是没有写作灵感，是马上就要四级考试了 T \_ T，哥现在还没开始正式复习。为了锻炼一下英语，所以选择翻译一些优秀的国外文章。

CSS3 中的滤镜（filter）功能让我们轻松方便简单的处理图片，而不需要使用 PhotoShop 或者使用很多 JavaScript、PHP 代码。这个属性已经得到比较新的 Firefox、Safari、Chrome 浏览器支持，而且我们可以通过综合的可替代的技术来模拟实现这个效果——甚至是 IE 浏览器。

本文中，我们将使用标准测试图片 [Lena Söderberg](http://en.wikipedia.org/wiki/Lenna) （译者注：Lena 这张裸体美女照片，被作为图片压缩的标准测试用图片）作为演示，使用 CSS 将其转换成黑白图片。在下面我将讲解如何使用 CSS 的这个功能实现调整色调、模糊、亮度、对比度和一些其他的效果。效果图：

![lena](https://qxzm-cdn.sapi.work/blog/2013/05/1931/lena.jpg)

## CSS3 的灰阶滤镜

使用 CSS3 来稀释一个图片的颜色，再简单不过了。我们可以把这个 CSS 语句写成一个类，这样遇到想要效果的图片，直接加上个类就可以了。

<pre>img.desaturate { filter: grayscale(100%); }</pre>

当然，当前的浏览器在使用 CSS3 的时候，要加上他们自己的浏览器功能实验性前缀，所以，我们首先要做的，就是写上浏览器的前缀：

<pre>img.desaturate { filter: grayscale(100%);
-webkit-filter: grayscale(100%);
-moz-filter: grayscale(100%);
-ms-filter: grayscale(100%);
-o-filter: grayscale(100%);
}</pre>

想要用在某个图片上很简单，加上一个类：

<pre>&lt;img src=lena-söderberg.png alt="Lena Söderberg" style=width:512px;height:512px class=desaturate&gt;</pre>

这就可以了。

## 增加一个 SVG 的滤镜效果

这个功能目前只在 Chrome 18+ 有效，其他浏览器马上就会增加支持。为了在 Firefox 4+ 中得到相同的效果，我们可以需要使用 SVG 滤镜。我把新建了一个单独的文件 的 saturate.svg ，代码如下：

<pre>&lt;svg version="1.1" xmlns="http://www.w3.org/2000/svg"&gt;
&lt;filter id="greyscale"&gt;
&lt;feColorMatrix type="matrix" values="0.3333 0.3333 0.3333 0 0
0.3333 0.3333 0.3333 0 0
0.3333 0.3333 0.3333 0 0
0  0  0  1 0"/&gt;
&lt;/filter&gt;
&lt;/svg&gt;</pre>

不要被这段 SVG 代码吓住了——虽然上面的矩阵数列有点复杂。这段代码我推荐你直接复制粘贴成一个通用的“小文件”。我会再写一篇文章详细介绍一下上面矩阵变化，在这里不再赘述。

加上上面的 SVG 文件引用，我们要插入 HTML 页面的 CSS 代码如下：

<pre>img.desaturate{
filter: grayscale(100%);
-webkit-filter: grayscale(100%); -moz-filter: grayscale(100%);
-ms-filter: grayscale(100%); -o-filter: grayscale(100%);
filter: url(desaturate.svg#greyscale);
}</pre>

## 为 IE 做兼容

到现在我们的代码可以兼容未来的浏览器，和最新版的 Chrome 、 Firefox 4+。为了让 IE 6-9 加入兼容列表，我们需要使用微软的笨拙但是有效的 filter 滤镜：

<pre>img.desaturate{
filter: grayscale(100%);
-webkit-filter: grayscale(100%); -moz-filter: grayscale(100%);
-ms-filter: grayscale(100%); -o-filter: grayscale(100%);
filter: url(desaturate.svg#greyscale);
filter: gray;
}</pre>

如果你还想做老版本的 Webkit 内核浏览器的兼容：

<pre>img.desaturate{
filter: grayscale(100%);
-webkit-filter: grayscale(100%); -moz-filter: grayscale(100%);
-ms-filter: grayscale(100%); -o-filter: grayscale(100%);
filter: url(desaturate.svg#greyscale);
filter: gray;
-webkit-filter: grayscale(1);
}</pre>

不幸的是，Safari 和 Opera 仍然不支持，但是 Safari 5.2 ——很快就会发布——应该会支持 webkit CSS3 滤镜功能，同时 Opera 对 CSS3 的支持正在不断提升。

## 注意

如果你想要在所有的浏览器中实现这个视觉效果（假设你的访问者都支持 JavaScript）你可以使用 jQuery 或者 [Greyscale.js](http://james.padolsey.com/demos/grayscale) 来修改你的图片，使其去色。

上面咱们写的 CSS 代码可以让我们不需要使用 PhotoShop 就可以把图片变成黑白的。使用 CSS 来实现这个功能，可以非常容易修改：例如，你可以看到当我们把去色程度参数从 100% 变成 50% 的时候图片会是原色和黑白融合在一起的效果。
