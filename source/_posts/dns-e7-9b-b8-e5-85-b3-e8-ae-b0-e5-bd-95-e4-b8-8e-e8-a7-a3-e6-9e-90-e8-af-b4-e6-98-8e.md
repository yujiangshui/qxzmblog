title: DNS相关记录与解析说明
id: 671
categories:
  - 网站与后台开发
date: 2012-02-16 15:16:17
tags:
---

首先，先来了解一下dns是什么。

网站都是放在服务器上面的，在网络发展的初期，通常都是使用IP地址访问网站。这样就出现了一些问题：1，一台服务器上，只能放一个主网站；2，IP地址通常有好几位数字，记忆起了非常不方便。于是人们就发明了域名，通过域名来标记网站的位置。使用域名，可以方便记忆，而且可以设置子域等等，一台服务器上，可以绑定多个域名建设多个网站，域名还是一种品牌。但是发明了域名，要怎么才能用呢？虽然有了域名，但是访问一个网站，实际上还得通过服务器IP等去访问。于是DNS也出现了，它的作用就是，当用户访问一个域名的时候，把域名提交给dns服务器，dns服务器从服务器上面读取这个域名对应的服务器IP，返回IP地址，然后浏览器就去访问服务器，获取相应的网页。

当然，上面的一个流程只是简单的介绍了一下工作原理，实际中要复杂的多。既然我们是使用者，不是创造者，所以在这里就不用过多的研究。下面，潜行者m以dnspod的dns解析为例，给大家说说关于dns设置的各个记录的作用和用法：

**1，主机记录：**

主机记录就是设置你要解析的域名。如果你要解析根域名，就填上“@”或者空着，如果你要解析子域名，例如：www等，你可以填上www或者是其他你要创建的新的子域名。

**2，记录类型：**

这才是dns主要的功能。记录类型，表示着你这个域名要怎么解析，不同的记录类型有着不同的作用，而且在后面填的信息也不同。通常来说，当你购买网站空间或者服务器的时候，服务商会告诉你域名要怎么解析，解析到哪里。你要根据服务商告诉你的信息去解析。常见的几种记录类型如下：

A记录：表示你要把这个域名解析到一个IP地址，就是你让这个域名指向的是服务器地址。空间服务商会给你空间的服务器IP地址，之后在后面填写。

CNAME记录：表示你要把这个域名解析到另一个域名上，通过那一个域名获得服务器IP。通常购买虚拟主机的时候，服务商提供给你解析的不是IP地址，而是一个域名，这时候，你就要使用CNAME记录。

NS记录：表示域名服务器记录，它表示你的域名的dns服务器地址。通常不用修改，如果你新建了一个子域名，想要把这个子域名的dns服务交给其他dns服务器，可以新建一个子域名，选择NS记录，在后面填上你想换用的dns服务器地址即可。

MX记录：是邮件交换记录，它指向一个邮件服务器，用于电子邮件系统发邮件时根据收信人的地址后缀来定位邮件服务器。如果你想拥有类似qxzm@qianxingzhem.com的邮箱，那么你必须要在dns上面配置MX记录，并且将其指向一台提供邮件服务的服务器。当有人要发送邮件到 qxzm@qianxingzhem.com上面时，邮件系统会通过dns检测qianxingzhem.com域名上面是否绑定了邮件服务器，如果绑定了，就把邮件发送到这个服务器上面处理。

除了上面四种比较常用的记录类型之外，还有AAAA、TXT、URL等记录类型，但是这些不常用，有想了解的朋友，可以搜索一下。

**3，记录值：**

记录值是与前面记录类型相对应的，在前面选择了记录类型，在后面的记录值中，就必须填入相应格式的记录值。

A记录：填入服务器IP地址，注意是IPv4，就是类似 192.168.22.123 这种的服务器IP。

CNAME记录：填入一个域名，这个域名是空间商提供的。

NS记录：填入的也是一个域名，是DNS服务器域名，例如：f1g1ns1.dnspod.net.

MX记录：通常是一个域名，一般有邮件服务商提供。

**4，MX优先级**

这一项只针对MX记录，而且多条MX记录才有效。当添加多条MX记录之后，我们可以设置优先级，让邮件系统通过dns读取的时候，优先读取哪一个值。这样，当优先级高的服务器不能使用的时候，可以调用优先级低的服务器补充上，同时优先级低的服务器可以当做备份使用。

**5，TTL**

dns中的ttl表示缓存生效时间。DNS解析一个域名，是需要一定时间的，也需要占用dns服务器资源，然而域名指向的IP地址并不是经常变化的。所以当用户访问一次域名之后，DNS服务器把返回的IP地址储存到你的电脑上，当你再去访问这个域名的时候，就不用在请求dns服务器了，直接从电脑上读取直接访问，这样可以节省资源。TTL就是生效时间，如果超过了这个时间，当你访问这个域名的时候，会再次请求dns服务器，dns服务器会再次返回域名的地址，进行缓存。